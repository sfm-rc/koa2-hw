{"version":3,"sources":["../../src/models/db_connection.js"],"names":["require","pool","createPool","db","query","sql","values","resolve","reject","getConnection","err","connection","rows","release"],"mappings":";;;;AAIA,8B;AACA,mC,6IALA;;mLAGAA,QAAQ,QAAR,E,CAGA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAMC,OAAO,gBAAMC,UAAN;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAOC,EAPM,CAAb;;;AAUA,IAAMC,QAAQ,SAARA,KAAQ,CAAUC,GAAV,EAAeC,MAAf,EAAwB;AACpC,SAAO,sBAAY,UAAEC,OAAF,EAAWC,MAAX,EAAuB;AACxCP,SAAKQ,aAAL,CAAmB,UAASC,GAAT,EAAcC,UAAd,EAA0B;AAC3C,UAAID,GAAJ,EAAS;AACPF,eAAQE,GAAR;AACD,OAFD,MAEO;AACLC,mBAAWP,KAAX,CAAiBC,GAAjB,EAAsBC,MAAtB,EAA8B,UAAEI,GAAF,EAAOE,IAAP,EAAgB;;AAE5C,cAAKF,GAAL,EAAW;AACTF,mBAAQE,GAAR;AACD,WAFD,MAEO;AACLH,oBAASK,IAAT;AACD;AACDD,qBAAWE,OAAX;AACD,SARD;AASD;AACF,KAdD;AAeD,GAhBM,CAAP;AAiBD,CAlBD,C;;;AAqBe,EAAET,YAAF,E","file":"db_connection.js","sourcesContent":["/**\r\n * Created by zhuzhu on 2017/7/3.\r\n */\r\nrequire('colors')\r\nimport mysql from 'mysql';\r\nimport config from '../config';\r\n//const mysql =  require('mysql');\r\n\r\n// var con = mysql.createConnection(config.db);\r\n// console.log(\"start Connected!\".green);\r\n// con.connect(function(err) {\r\n//     if (err) throw err;\r\n//     console.log(\"Connected!\".green);\r\n// });\r\n\r\nconst pool = mysql.createPool(\r\n//     {\r\n//   host     :  '127.0.0.1',\r\n//   user     :  'root',\r\n//   password :  '123456',\r\n//   database :  'my_database'\r\n// }\r\nconfig.db\r\n)\r\n\r\nconst query = function( sql, values ) {\r\n  return new Promise(( resolve, reject ) => {\r\n    pool.getConnection(function(err, connection) {\r\n      if (err) {\r\n        reject( err )\r\n      } else {\r\n        connection.query(sql, values, ( err, rows) => {\r\n\r\n          if ( err ) {\r\n            reject( err )\r\n          } else {\r\n            resolve( rows )\r\n          }\r\n          connection.release()\r\n        })\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\n\r\nexport default { query };"]}