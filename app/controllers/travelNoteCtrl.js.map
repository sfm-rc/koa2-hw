{"version":3,"sources":["../../src/controllers/travelNoteCtrl.js"],"names":[],"mappings":"mZAAA;AACA;AACA,gC;;AAEA;;;;;AAKA,IAAM,wGAAO,iBAAO,GAAP,EAAY,IAAZ;AACL,kBADK,GACI,IAAI,OAAJ,CAAY,IADhB;AAEJ,iBAFI,GAEsB,MAFtB,CAEJ,KAFI,EAEG,SAFH,GAEsB,MAFtB,CAEG,SAFH,EAEc,IAFd,GAEsB,MAFtB,CAEc,IAFd;AAGL,eAHK,GAGC,sEAHD;AAIM,wCAAM,GAAN,EAAW,CAAC,IAAD,EAAO,CAAC,YAAU,CAAX,IAAc,KAArB,EAA4B,KAA5B,CAAX,CAJN,SAIP,IAJO;AAKO,wCAAM,2DAAN,EAAmE,CAAC,IAAD,CAAnE,CALP,SAKP,KALO;AAMX,gBAAI,IAAJ,GAAW,sBAAc,EAAC,MAAM,CAAP,EAAU,SAAS,SAAnB,EAA8B,QAAQ,IAAtC,EAAd,EAA2D,uBAAW,KAAX,EAAkB,SAAlB,EAA6B,MAAM,CAAN,EAAS,KAAtC,CAA3D,CAAX,CANW,oEAAP,0EAAN,C;;;AASe;AACb,YADa,E","file":"travelNoteCtrl.js","sourcesContent":["import {query} from '../models/db_connection';\nimport { pagination, getLinuxTimeStamp} from '../uitil';\nimport moment from 'moment';\n\n/**\n * 获取游记列表\n * @param {*} ctx \n * @param {*} next \n */\nconst list = async (ctx, next) => {\n  const params = ctx.request.body;\n  const {limit, pageIndex, type} = params;\n  const sql = 'select * from hw_travel_note where type=? ORDER BY id desc limit ?,?';\n  let data = await query(sql, [type, (pageIndex-1)*limit, limit]);\n  let count = await query('select count(*) as count from hw_travel_note where type=?', [type]);\n  ctx.body = Object.assign({code: 0, message: 'success', 'data': data}, pagination(limit, pageIndex, count[0].count));\n}\n\nexport default {\n  list\n}"]}